---
layout: post
title: "Interesting questions, techniques and solutions"
categories: 教程
---

**If in a society, families keep having children until they have a boy, and each time they have a girl, they continue to have more children, then what is the equilibrium ratio of men to women in this society?**

1:1

intuitively, every period, will generate same partition of the gender

geometric distribution

bernoulli experiment

**假设抖音的日活跃用户(DAU)突然下降10%，你如何从业务维度进行归因分析，并提出可落地的优化方案?**

第一步：数据准确性校验 (Sanity Check)

链路，口径

第二步：指标拆解与维度下钻 (Drill Down)

DAU = 新增用户 + 留存老用户 + 回流用户

时间维度

平台/版本维度

地区维度

用户画像维度

第三步：内外归因分析 (Hypothesis & Verification)

#### ***\*1.在abtest的应用 p值的意义，第一类和第二类错误的定义是什么？\****

AB实验实际上是建立在假设检验的基础上的，P值就是在原假设成立的前提下，出现原假设以及更极端现象的概率，定义了第一类错误的具体程度，第一类错误α叫弃真错误或显著性水平，即原假设为真时却被我们拒绝的概率；  

  第二类错误β叫采伪错误，即原假设为伪我们没有拒绝的概率。在一定样本量的情况下，减小一类错误必然会增大另一类错误，在实践中我们一般会优先控制第一类错误，因为原假设是非常明确的  

  答案解析  

  1-第一类错误也即原假设为真的情况我们接受的概率，对于AB实验，犯这个错误代表新策略没有收益，我们却认为有收益，然后上线的错误，一般第一类错误不超过5%，第一类错误是明显的，也就是说在原假设为真的情况下接受原假设的概率要超过95%；  

  统计功效=1-第二类错误，也即当AB两组实际有差异时,能被我们检测出来差异的概率

作者：现在开始努力还不晚
链接：https://www.nowcoder.com/discuss/353159158197329920
来源：牛客网

#### 规则 1：在训练集 (Training Set) 上

- **使用：`fit_transform()`**
- **原因**：我们需要在训练集上学习参数（比如训练集的均值），并且要把训练集转换好喂给模型训练。

#### 规则 2：在测试集 (Test Set) 上

- **使用：`transform()` ONLY**
- **绝对不能用 `fit()` 或 `fit_transform()`！**
- **原因（数据泄露）**： 测试集模拟的是“未来的、未知的数据”。如果你在测试集上用了 `fit`，就等于让模型**重新计算了测试集的均值和方差**来进行标准化。 这意味着你“偷看”了考试答案的统计分布！ **正确做法**：必须用**训练集的**均值和方差去转换测试集，以此来保持标准统一。

---

### 选项解析：

**C. `df['mean_score'] = df.groupby('user_id')['score'].transform('mean')`**

- **最合适且开销最小（Best Practice）**。
- **原理**：`transform` 是 Pandas 中专门为“**组内计算并广播回原形状**”设计的操作。它会先计算每组的均值，然后把这个均值“复制粘贴”到该组内的每一行。
- **结果**：返回一个与原 DataFrame **索引完全一致、长度相同**的 Series，可以直接赋值给新列。底层经过高度优化（Cython），速度极快。

---

在Pandas的groupby操作中，transform方法设计用于对每个分组应用函数（如lambda函数），并返回一个与原DataFrame行数相同的结果，同时保持原索引。这是因为transform会将函数应用于每个元素，并将结果广播到原分组大小。相比之下：A选项apply虽然灵活，但它默认可能返回聚合结果（行数减少）或需额外处理才能保持行数相同，不是优先选择；C选项agg专门用于聚合（返回每个分组的摘要统计，行数减少）；D选项filter用于过滤分组（行数可能不同）。因此，题目要求优先使用transform方法。题目文字无错误：无错别字、专业术语（如'Pandas'、'groupby'、'apply'等）拼写正确，无逻辑矛盾，且选项未泄露答案。

---

批量注释: Ctrl+K,Ctrl+C
取消注释: Ctrl+K,Ctrl+U